<h1>npm-packlist</h1><p><a href="https://travis-ci.com/npm/npm-packlist"><img src="https://travis-ci.com/npm/npm-packlist.svg?token=hHeDp9pQmz9kvsgRNVHy&amp;branch=master" alt="Build Status"></a></p>
<p>Get a list of the files to add from a folder into an npm package</p>
<p>These can be handed to <a href="http://npm.im/tar">tar</a> like so to make an npm
package tarball:</p>
<pre><code class="language-js">const packlist = require(&#39;npm-packlist&#39;)
const tar = require(&#39;tar&#39;)
const packageDir = &#39;/path/to/package&#39;
const packageTarball = &#39;/path/to/package.tgz&#39;

packlist({ path: packageDir })
  .then(files =&gt; tar.create({
    prefix: &#39;package/&#39;,
    cwd: packageDir,
    file: packageTarball,
    gzip: true
  }, files))
  .then(_ =&gt; {
    // tarball has been created, continue with your day
  })
</code></pre>
<p>This uses the following rules:</p>
<ol>
<li>If a <code>package.json</code> file is found, and it has a <code>files</code> list,
then ignore everything that isn&#39;t in <code>files</code>.  Always include the
readme, license, notice, changes, changelog, and history files, if
they exist, and the package.json file itself.</li>
<li>If there&#39;s no <code>package.json</code> file (or it has no <code>files</code> list), and
there is a <code>.npmignore</code> file, then ignore all the files in the
<code>.npmignore</code> file.</li>
<li>If there&#39;s no <code>package.json</code> with a <code>files</code> list, and there&#39;s no
<code>.npmignore</code> file, but there is a <code>.gitignore</code> file, then ignore
all the files in the <code>.gitignore</code> file.</li>
<li>Everything in the root <code>node_modules</code> is ignored, unless it&#39;s a
bundled dependency.  If it IS a bundled dependency, and it&#39;s a
symbolic link, then the target of the link is included, not the
symlink itself.</li>
<li><p>Unless they&#39;re explicitly included (by being in a <code>files</code> list, or
a <code>!negated</code> rule in a relevant <code>.npmignore</code> or <code>.gitignore</code>),
always ignore certain common cruft files:</p>
<ol>
<li>.npmignore and .gitignore files (their effect is in the package
already, there&#39;s no need to include them in the package)</li>
<li>editor junk like <code>.*.swp</code>, <code>._*</code> and <code>.*.orig</code> files</li>
<li><code>.npmrc</code> files (these may contain private configs)</li>
<li>The <code>node_modules/.bin</code> folder</li>
<li>Waf and gyp cruft like <code>/build/config.gypi</code> and <code>.lock-wscript</code></li>
<li>Darwin&#39;s <code>.DS_Store</code> files because wtf are those even</li>
<li><p><code>npm-debug.log</code> files at the root of a project</p>
<p>You can explicitly re-include any of these with a <code>files</code> list in
<code>package.json</code> or a negated ignore file rule.</p>
</li>
</ol>
</li>
</ol>
<h2>API</h2><p>Same API as <a href="http://npm.im/ignore-walk">ignore-walk</a>, just hard-coded
file list and rule sets.</p>
<p>The <code>Walker</code> and <code>WalkerSync</code> classes take a <code>bundled</code> argument, which
is a list of package names to include from node_modules.  When calling
the top-level <code>packlist()</code> and <code>packlist.sync()</code> functions, this
module calls into <code>npm-bundled</code> directly.</p>
